(function(){"use strict";var a,b,c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i=function(a,b){return function(){return a.apply(b,arguments)}};f={},f.Assets=a=function(a){function b(a){this.config=a}return h(b,a),b.prototype.preloadBar=null,b.prototype.preloadBgd=null,b.prototype.config={},b.prototype.preload=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(console.log("Class Assets initializing"),this.config.showSplash&&this.load.setPreloadSprite(this.add.sprite(0,0,this.config.splashKey)),this.config.showPreloadBar&&(f=this.add.sprite(.5*this.config.width,.5*this.config.height,this.config.preloadBgdKey),f.anchor.setTo(.5,.5),e=this.add.sprite(.5*this.config.width,.75*this.config.height,this.config.preloadBarKey),e.anchor.setTo(.5,.5),this.load.setPreloadSprite(e)),this.config.audio){i=this.config.audio;for(a in i)h=i[a],this.load.audio(a,this.config.path+h)}if(this.config.images){j=this.config.images;for(a in j)h=j[a],this.load.image(a,this.config.path+h)}if(this.config.tilemaps){k=this.config.tilemaps;for(a in k)c=k[a],d=c.options.map,this.load.tilemap(d,this.config.path+("levels/"+d.json),null,Phaser.Tilemap.TILED_JSON)}if(this.config.sprites){l=this.config.sprites;for(b in l)g=l[b],"string"==typeof g.file?this.load.spritesheet(b,this.config.path+g.file,g.width,g.height):(g.selected===!0&&this.load.spritesheet(b,this.config.path+g.file[g.selected],g.width,g.height),g.file.forEach(function(a){return function(c,d){return a.load.spritesheet(""+b+"["+d+"]",a.config.path+c,g.width,g.height)}}(this)))}},b.prototype.create=function(){return this.state.start(this.config.menu,!0,!1)},b}(Phaser.State),f.Boot=b=function(a){function b(a){this.config=a}return h(b,a),b.prototype.orientated=!1,b.prototype.config={},b.prototype.preload=function(){return""!==this.config.splashKey&&this.load.image(this.config.splashKey,this.config.path+this.config.splashImg),""!==this.config.preloadBarKey?(this.load.image(this.config.preloadBarKey,this.config.path+this.config.preloadBarImg),this.load.image(this.config.preloadBgdKey,this.config.path+this.config.preloadBgdImg)):void 0},b.prototype.create=function(){return this.input.maxPointers=1,this.stage.disableVisibilityChange=!0,this.game.device.desktop?(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.minWidth=this.config.minWidth,this.scale.minHeight=this.config.minHeight,this.scale.maxWidth=this.config.maxWidth,this.scale.maxHeight=this.config.maxHeight,this.scale.pageAlignHorizontally=this.config.pageAlignHorizontally,this.scale.pageAlignVertically=this.config.pageAlignVertically,this.scale.setScreenSize(!0)):(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.minWidth=this.config.minWidth,this.scale.minHeight=this.config.minHeight,this.scale.maxWidth=this.config.maxWidth,this.scale.maxHeight=this.config.maxHeight,this.scale.pageAlignHorizontally=this.config.pageAlignHorizontally,this.scale.pageAlignVertically=this.config.pageAlignVertically,this.scale.setScreenSize(!0),this.config.forceOrientation&&(this.scale.forceOrientation(this.config.pageAlignHorizontally,this.config.pageAlignVertically),this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this),this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this))),this.state.start(this.config.assets,!0,!1)},b.prototype.gameResized=function(a,b){},b.prototype.enterIncorrectOrientation=function(){return this.orientated=!1,document.getElementById("orientation").style.display="block"},b.prototype.leaveIncorrectOrientation=function(){return this.orientated=!0,document.getElementById("orientation").style.display="none"},b}(Phaser.State),f.Config=c=function(){function a(a,b){var c;this.source=a,this.path=null!=b?b:"",this.xlate=i(this.xlate,this),this.setSection=i(this.setSection,this),this.paths={},this.sections={},this.audio={},this.images={},this.sprites={},this.tilemaps={},this.levels={},this.strings={},this.fonts={},this.arrays={},this.preferences={},this.extra={},0!==this.path.length&&"/"!==this.path[-1]&&(this.path+="/"),c=YAML.parse(this.source),null!=c.boot&&(this.boot=c.boot),null!=c.assets&&(this.assets=c.assets),null!=c.menu&&(this.menu=c.menu),null!=c.id&&(this.id=c.id),this.showSplash=c.showSplash,this.transparent=c.transparent,this.locale=c.locale,this.name=c.name,this.title=c.title,this.paths=c.paths,this.width=c.minWidth,this.height=c.minHeight,this.minWidth=c.minWidth,this.minHeight=c.minHeight,this.maxWidth=c.maxWidth,this.maxHeight=c.maxHeight,this.pageAlignHorizontally=c.pageAlignHorizontally,this.pageAlignVertically=c.pageAlignVertically,this.forceOrientation=c.forceOrientation,this.splashKey=c.splashKey,this.splashImg=c.splashImg,this.showPreloadBar=c.showPreloadBar,this.preloadBarKey=c.preloadBarKey,this.preloadBarImg=c.preloadBarImg,this.preloadBgdKey=c.preloadBgdKey,this.preloadBgdImg=c.preloadBgdImg,this.sections=c.sections,this.audio=c.audio,this.images=c.images,this.sprites=c.sprites,this.tilemaps=c.tilemaps,this.levels=c.levels,this.strings=c.strings,this.fonts=c.fonts,this.preferences=c.preferences,this.extra=c.extra}var b,c;return b="array/",c="string/",a.prototype.path="",a.prototype.name="name",a.prototype.title="",a.prototype.boot="__boot",a.prototype.assets="__assets",a.prototype.menu="__menu",a.prototype.debug=!1,a.prototype.locale=!1,a.prototype.transparent=!0,a.prototype.id="",a.prototype.renderer=Phaser.CANVAS,a.prototype.width=320,a.prototype.height=480,a.prototype.minWidth=320,a.prototype.minHeight=480,a.prototype.maxWidth=640,a.prototype.maxHeight=960,a.prototype.pageAlignHorizontally=!0,a.prototype.pageAlignVertically=!0,a.prototype.forceOrientation=!1,a.prototype.orientation="",a.prototype.showSplash=!1,a.prototype.splashKey="splashScreen",a.prototype.splashImg="",a.prototype.showPreloadBar=!1,a.prototype.preloadBarKey="preloadBar",a.prototype.preloadBarImg="",a.prototype.preloadBgdKey="preloadBgd",a.prototype.preloadBgdImg="",a.prototype.paths=null,a.prototype.sections=null,a.prototype.audio=null,a.prototype.images=null,a.prototype.sprites=null,a.prototype.tilemaps=null,a.prototype.levels=null,a.prototype.strings=null,a.prototype.fonts=null,a.prototype.arrays=null,a.prototype.preferences=null,a.prototype.extra=null,a.prototype.setSection=function(a,b){var c,d,e,f,g,h;if("arrays"===a)try{g=YAML.parse(b),h=[];for(d in g)f=g[d],this.arrays[d]=[],h.push(function(){var a,b,c;for(c=[],a=0,b=f.length;b>a;a++)e=f[a],c.push(this.arrays[d].push(this.xlate(e)));return c}.call(this));return h}catch(i){c=i}else try{return this[a]=YAML.parse(b)}catch(i){c=i}},a.prototype.xlate=function(a){return"string"==typeof a?0===a.indexof(c)?this.strings[values.replace(c,"")]:0===a.indexOf(b)?this.strings[values.replace(b,"")]:a:a},a}(),f.Dilithium=d=function(a){function b(a){this.config=a,console.log("Dilithium initialized"),this.game=new Phaser.Game(this.config.width,this.config.height,this.config.renderer,this.config.id,this)}return h(b,a),b.prototype.config=null,b.prototype.game=null,b.using=function(a,b){var d;d=new XMLHttpRequest,d.onreadystatechange=function(){var e,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(4===d.readyState&&200===d.status){e=new c(d.responseText,a),l=[],null!=e.sections.strings&&(l.push({name:"strings",src:e.sections.strings,http:new XMLHttpRequest}),e.locale&&l.push({name:"strings",src:e.sections.strings.replace(".yaml","-"+window.navigator.language+".yaml"),http:new XMLHttpRequest})),s=e.sections;for(j in s)m=s[j],"strings"!==j&&l.push({name:j,src:m,http:new XMLHttpRequest});if(0===l.length)return b(e);for(h=0,g=0,i=n=0,t=l.length;t>=0?t>n:n>t;i=t>=0?++n:--n)g+=Math.pow(2,i);for(o=0,q=l.length;q>o;o++)k=l[o],k.http.onreadystatechange=function(){var a,c,d,f,i,j,k;for(a=d=0,j=l.length;j>=0?j>d:d>j;a=j>=0?++d:--d)4!==l[a].http.readyState||200!==(k=l[a].http.status)&&404!==k||(h|=Math.pow(2,a));if(h===g){for(f=0,i=l.length;i>f;f++)c=l[f],200===c.http.status&&e.setSection(c.name,c.http.responseText);b(e)}};for(p=0,r=l.length;r>p;p++)k=l[p],k.http.open("GET",""+a+"/"+k.src,!0),k.http.send()}else 4===d.readyState&&200!==d.status&&(e=new f.Config("",a),b(e))},d.open("GET",""+a+"/config.yaml",!0),d.send()},b.prototype.create=function(){return this.game.state.add(this.config.boot,new f.Boot(this.config)),this.game.state.add(this.config.assets,new f.Assets(this.config)),this.game.state.add(this.config.menu,this.levels()),this.game.state.start(this.config.boot)},b.prototype.levels=function(){},b}(Phaser.State),f.Template=e=function(){function a(a){parse(a)}return a.prototype.template="",a.prototype._template=null,a.prototype.parse=function(a){this.template=a,this._template=Liquid.Template.parse(a)},a.prototype.render=function(a){return this._template.render(a)},a}(),"undefined"!=typeof module&&null!==module?module.exports=f:window.li2=f}).call(this);